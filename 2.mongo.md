Mongo Instructions

````

## Import the distance records to MongoDB


1. Open a terminal and run the mongo daemon for starting the server:
Use  ./data_mongo to store the mongo db info

> ```
> mongod —port 27017 —dbpath ./data_mongo —oplogSize 50
> ```


2. Check if you have Mongo up and running:

````

service mongod status

```

3. run
```

resources/download_data.sh

```
this will put the model and the seed data into /data



4. run the
resources/import_distances.sh
```

./resources/import_distances.sh

```
Output:
```

2019-10-01T17:06:46.957+0200 connected to: mongodb://localhost/
2019-10-01T17:06:47.035+0200 4696 document(s) imported successfully. 0 document(s) failed to import.
MongoDB shell version v4.2.0
connecting to: mongodb://127.0.0.1:27017/agile_data_science?compressors=disabled&gssapiServiceName=mongodb
Implicit session: session { "id" : UUID("9bda4bb6-5727-4e91-8855-71db2b818232") }
MongoDB server version: 7.0.17
{
"createdCollectionAutomatically" : false,
"numIndexesBefore" : 1,
"numIndexesAfter" : 2,
"ok" : 1
}

```

```

docker build -f Dockerfile.mongo -t mongo-server .
docker run -d --name mongo-server -p 27017:27017 mongo-server -v mongo_data:/data/db

docker-compose down
docker volume rm practica_creativa_mongo_data
docker-compose up -d --build mongo
docker-compose logs -f mongo

docker-compose down -v
docker-compose build --no-cache mongo
docker-compose up -d mongo

docker-compose down -v
docker-compose build --no-cache
docker-compose up --build --force-recreate

docker-compose exec mongo mongosh -u root -p example

docker-compose exec mongo mongosh -u root -p example agile_data_science --eval "db.origin_dest_distances.countDocuments()"

docker exec -it mongo mongosh -u root -p example agile_data_science --eval "db.origin_dest_distances.countDocuments()"
use agile_data_science
db.origin_dest_distances.countDocuments()
db.origin_dest_distances.findOne()
db.flight_delay_ml_response.findOne()
db.flight_delay_ml_response.find({ UUID: "25a51571-a20d-4509-ad39-1e224e457115" })
3eb6b8d7-b853-41dc-afda-04e334db7dc9
6f34078d-4494-4bfb-8a43-6f793aee54b0
